"set nocompatible              " be iMproved, required
"
call plug#begin('~/.config/nvim/plugged')
" Autocomplete stuff
"Plug 'Valloric/YouCompleteMe'
Plug 'davidhalter/jedi-vim'
Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
Plug 'deoplete-plugins/deoplete-jedi'
Plug 'ervandew/supertab'

Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'w0rp/ale'
"Plug 'vim-syntastic/syntastic'
"Plug 'Chiel92/vim-autoformat'
Plug 'scrooloose/nerdtree'
Plug 'terryma/vim-multiple-cursors'
Plug 'vimwiki/vimwiki'

" Javascript & web plugins
Plug 'mattn/emmet-vim'
Plug 'pangloss/vim-javascript'      "javascript syntax support
Plug 'mxw/vim-jsx'                  " jsx syntax support
Plug 'Valloric/MatchTagAlways'      "html tag highlight and tab
Plug 'maksimr/vim-jsbeautify'

" golang plugins
Plug 'fatih/vim-go'

Plug 'tpope/vim-surround'           "surround plugin

" Snippets plugins
Plug 'SirVer/ultisnips'
Plug 'honza/vim-snippets' " Snippets are separated from the engine. Add this if you want them:
Plug 'epilande/vim-react-snippets'

Plug 'ctrlpvim/ctrlp.vim' " search for file plugin
"Plug 'majutsushi/tagbar' " tag navbar

Plug 'tpope/vim-unimpaired' " [ ] key bindings

Plug 'google/yapf', { 'rtp': 'plugins/vim', 'for': 'python' }

call plug#end()


" Save whenever switching windows or leaving vim. This is useful when running
" " the tests inside vim without having to save all files first.
au FocusLost,WinLeave * :silent! wa

" command line / ex mode bindings
" %% expand to dir of current file
cnoremap <expr> %% getcmdtype() == ':' ? expand('%:h').'/' : '%%'
"syntastic settings
"set statusline+=%#warningmsg#
"set statusline+=%{SyntasticStatuslineFlag()}
"set statusline+=%*

"let g:syntastic_always_populate_loc_list = 1
"let g:syntastic_auto_loc_list = 1
"let g:syntastic_check_on_open = 1
"let g:syntastic_check_on_wq = 1

"let g:syntastic_typescript_tsc_fname = ''
"let g:syntastic_typescript_checkers = ['eslint', 'tslint']
"let g:syntastic_javascript_checkers = ['eslint']
"let g:syntastic_python_checkers = ['python']
"let g:typescript_compiler_binary = 'tsc'
"let g:typescript_compiler_options = ''
"let g:syntastic_html_checkers = [] " find angular linter!
"autocmd QuickFixCmdPost [^l]* nested cwindow
"autocmd QuickFixCmdPost    l* nested lwindow





let wiki = {}
let wiki.path = '~/vimwiki/'
let wiki.nested_syntaxes = {'python': 'python', 'c++': 'cpp', 'js': 'javascript'}
let g:vimwiki_list = [wiki]

" remove mvim lag
"set noshowcmd
"set nolazyredraw

"" script for making * and # search for visual selection in visual mode
xnoremap * :<C-u>call <SID>VSetSearch('/')<CR>/<C-R>=@/<CR><CR>
xnoremap # :<C-u>call <SID>VSetSearch('?')<CR>?<C-R>=@/<CR><CR>

function! s:VSetSearch(cmdtype)
	let temp = @s
	norm! gv"sy
	let @/ = '\V' . substitute(escape(@s, a:cmdtype.'\'), '\n', '\\n', 'g')
    let @s = temp
endfunction

" clear highlight search
nnoremap <leader>l :<C-u>nohlsearch<CR><C-l>

" ctag reindex
nnoremap <leader>k :!ctags -R .<CR>
nmap <leader>i <C-]>
set tags=./tags,tags,.git/tags

" ctrlp settings
let g:ctrlp_custom_ignore = {
  \ 'dir': '\v[\/](landing-page|cryptosignals|bower_components|node_modules|DS_Store|pkg|build|bin)'
  \ }
nnoremap <leader>p :CtrlPBuffer<CR>
nnoremap <leader>t :CtrlPTag<cr>

" tagbar settings
nnoremap <C-n> :TagbarToggle<CR>

" ultisnips tab
let g:UltiSnipsExpandTrigger="<C-l>"
let g:UltiSnipsJumpForwardTrigger="<C-k>"
let g:UltiSnipsJumpBackwardTrigger="<C-j>"

" unimpaired bindings
nmap < [
nmap > ]
omap < [
omap > ]
xmap < [
xmap > ]
nnoremap § < 
nnoremap ° > 
vnoremap § < 
vnoremap ° > 
xnoremap § < 
xnoremap ° > 

" yapf settings
nmap <Leader>y :YAPF<CR>:w<CR>

"  Outside colorscheme switch
nmap <Leader>o :set background=light<CR>:colorscheme PaperColor<CR>
nmap <Leader>i :set background=dark<CR>:colorscheme NeoSolarized<CR>
